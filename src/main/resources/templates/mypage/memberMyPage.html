<!DOCTYPE html>
<<<<<<< Updated upstream
<html xmlns:th="http://www.thymeleaf.org">
=======
<html xmlns:th="http://thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
>>>>>>> Stashed changes
<th:block th:replace="~{/layout/basic::setContent(~{this::content})}">
    <th:block th:fragment="content">
        <meta charset="UTF-8">
        <title>마이페이지</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
              rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
              crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"
                integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        </head>
        <body>
        <h1>마이페이지</h1>
        <input type="hidden" id="memberCode" th:value="${principal.memberCode}">
        <table  class="table table-secondary">
            <thead>
            <tr>
                <th scope="col">코드</th>
                <th scope="col">회원이름</th>
                <th scope="col">회원아이디</th>
                <th scope="col">회원이메일</th>
                <th scope="col">회원전화번호</th>
                <th scope="col">회원주소</th>
                <th scope="col">가입날짜</th>
<!--                <th scope="col">회원유형(ROLE)</th>-->
            </tr>
            </thead>
            <tbody>
            <tr>
                <th th:text="${memberCode}"></th>
                <th th:text="${memberName}"></th>
                <th th:text="${memberId}"></th>
                <th th:text="${memberEmail}"></th>
                <th th:text="${memberPhoneNumber}"></th>
                <th th:text="${memberAddress}"></th>
                <th th:text="${memberJoinDate}"></th>
<!--                <th th:text="${role}"></th>-->
            </tr>
            </tbody>
        </table>
<<<<<<< Updated upstream
<!--            <form th:action method="post" th:object="${member}">-->
<!--            <div class="mb-3">-->
<!--                <label for="memberId" class="form-label">아이디</label>-->
<!--                <input type="text" class="form-control" id="memberId" th:field="*{memberId}">-->
<!--            </div>-->

<!--            <div class="mb-3">-->
<!--                <label for="memberEmail" class="form-label">이메일</label>-->
<!--                <input type="text" class="form-control" id="memberEmail" th:field="*{memberEmail}">-->
<!--            </div>-->

<!--            <div class="mb-3">-->
<!--                <label for="memberPhoneNumber" class="form-label">휴대폰 번호</label>-->
<!--                <input type="text" class="form-control" id="memberPhoneNumber" th:field="*{memberPhoneNumber}">-->
<!--            </div>-->
<!--                <button id="memberCorrection" class="btn btn-outline-success" type="submit">회원수정</button>-->
<!--        <form>-->
=======
        <hr>
        <h1>구매 내역</h1>
        <a th:href="@{/product/orderlist(memberCode=${principal.memberCode})}">내역</a>
        <hr>
        <h1>환불 내역</h1>
        <a th:href="@{/product/refundlist(memberCode=${principal.memberCode})}">환불내역</a>
>>>>>>> Stashed changes
        <div class="text-center">
            <button id="memberDelete" class="btn btn-outline-success" type="submit">삭제</button>
            <a type="button" class="btn btn-outline-success" th:href="@{/}">메인으로</a>

        </div>

<<<<<<< Updated upstream
=======
        <hr>
        <h1>후원 내역</h1>
        <a th:href="@{/donation/manager(memberCode=${principal.memberCode})}">후원내역</a>
>>>>>>> Stashed changes
        </body>
    </th:block>
</th:block>
<script th:inline="javascript">
    // $(() => {
    //     $('#memberCorrection').on('click', () => {
    //         const memberId = $('#memberId').val();
    //         const memberEmail = $('#memberEmail').val();
    //         const memberPhoneNumber = $('#memberPhoneNumber').val();
    //
    //
    //         const path = '/api/member/memberCorrection';
    //
    //         const json = JSON.stringify({
    //             memberId,
    //             memberEmail,
    //             memberPhoneNumber,
    //
    //         });
    //
    //         $.ajax({
    //             url: path,
    //             type: 'PUT',
    //             contentType: 'application/json',
    //             data: json,
    //
    //         }).done(() => {
    //             alert('수정 완료');
    //             window.location.href = '/';
    //         }).fail((error) => {
    //             alert(error);
    //         })
    //     }),



    $('#memberDelete').on('click', () => {
        const memberCode = $('#memberCode').val();
        const path = '/api/member/memberDelete';

        const json = JSON.stringify({
            memberCode
        });
        console.log(json);
        $.ajax({
            url: path,
            type: 'DELETE',
            contentType: 'application/json',
            data: json,

        }).done( ()=> {
            alert('회원이 삭제되었습니다.');
            window.location.href = '/logout';
        }).fail( (error)=> {
            alert((error));
        })
    })


</script>

</html>